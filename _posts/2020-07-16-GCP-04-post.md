---
title: Google Cloud Platform - Cloud Pub/Sub
date : 2020-07-16 11:21:30 -0400
categories : GCP Google Cloud
---

#### 1. Cloud Pub/Sub 정의 : GCP의 대표적인 메시징서비스로 카프카(Kafka)나 래빗MQ(Rabbit MQ)와 같은 오픈소스 메시징 서비스와 동일한 서비스이다.



#### 2. Cloud Pub/Sub 특징 
* 글로벌규모에서도 낮은 지연시간과 안정적인 메시지 전달을 제공하고, 서버리스환경이기 때문에 별도의 인스턴스를 관리할 필요없이 사용량에 따라 초당 수억개까지 메시지를 확장할 수 있다.
* 초당 5억건의 메시지를 전송할 수 있으며, 이는 용량으로는 초당 1TB에 해당한다, 개발자는 이를 이용하여 GCP와 외부의 시스템을 빠르게 통합할 수 있다.



#### 3. 메시징서비스 
* 설명 : 메시지(데이터)들을 큐(Queue)에 넣고 차례로 전달해주는 서비스이다.
* 특징
    - 서버가 동시에 처리할 수 있는 양은 한정적인 관계로 요청메시지를 큐에 쌓아놓고 처리할 수 있기때문에 응답하는 서버가 죽더라도 그사이에 요청이 들어온 메시지들은 메시지큐에 쌓여 있어서 서버가 살아났을때 처리한다.
    - 부하 분산 처리에도 유리하고, 여러대의 서버가 하나의 큐를 바라보도록하면 처리할 데이터가 많아져도 서버는 자신의 처리량에 맞는 요청만 가져와서 처리 할 수있다.



#### 4. Pub/Sub 구성
* Topic(주제) : 게시자가 메시지를 전송하는 이름이 지정된 리소스
* Subscription(구독) : 특정 주제의 메시지 수신 의향을 나타내는 이름이 지정된 항목
* Message(메시지) : 서비스를 통해 이동하는 데이터
* Publisher(게시자) : 특정 주제에 대한 메시지를 만들어 메시지 서비스를 전송하는 사람
* Subscriber(구축자) : 지정한 구독에 대한 메시지를 받는 사람



#### 5. Pull(가져오기) / Push(내보내기) 구독방법
* Pull(가져오기)방식 : Subscriber(구독자)가 Message(데이터)를 요청할 때 전달받는 구조의 구독방식
* Push(내보내기)방식 : Message(데이터)가 오면 바로 Subscriber(구독자)에 전달하는 방식



#### 6. 메시지 서비스의 성능판단 
* 설명 : 클라우드 Pub/Sub 같은 메시지의 성능은 확장성, 가용성, 지연시간이라는 3가지 요소로 판단한다.
* 확장성 : 지연시간이나 가용성의 현저한 저하없이 점점 증가하는 로드를 처리할 수 있어야한다, 판단기준에는 주제수와 게시자수, 구독수, 구독자수, 메시지수, 메시지크기, 게시하거나 소비된 메시지비율(처리량), 특정구동의 백로그크기로 구성된다.
* 가용성 : 다양한 유형의 문제를 얼마나 잘 처리해서 최종사용자가 오류해결을 알아차리지 못하게 하는가를 기준으로 측정한다.
* 지연시간 : 시스템성능을 시간기준으로 측정한 것으로 대부분의 서비스는 지연시간을 최소화하려고 한다, 판단기준은 게시된 메시지를 확인하는데 걸리는 시간과 게시된 메시지가 구독자에게 전달되는데 걸리는 시간으로 구성된다.
